{{ define "main" }}
{{- partial "sidebar.html" . -}}

<main class="flex-1 min-w-0">
  <div class="flex">
    <article class="flex-1 min-w-0 max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <!-- Lesson metadata -->
      {{- partial "lesson-meta.html" . -}}

      <!-- Prerequisites -->
      {{- partial "prerequisites.html" . -}}

      <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 dark:text-gray-100 mb-6">{{ .Title }}</h1>

      {{ with .Description }}
        <p class="text-lg text-gray-600 dark:text-gray-400 mb-8">{{ . }}</p>
      {{ end }}

      <!-- Main content -->
      <div class="prose prose-lg dark:prose-invert prose-elixir max-w-none
                  prose-headings:scroll-mt-20
                  prose-code:before:content-none prose-code:after:content-none
                  prose-pre:bg-gray-50 prose-pre:dark:bg-gray-900
                  prose-a:text-elixir-600 prose-a:dark:text-elixir-400 prose-a:no-underline hover:prose-a:underline">
        {{ .Content }}
      </div>

      <!-- HexDocs links -->
      {{- partial "hexdocs-link.html" . -}}

      <!-- Key takeaways -->
      {{- partial "key-takeaways.html" . -}}

      <!-- Previous/Next navigation -->
      {{- partial "prev-next.html" . -}}
    </article>

    <!-- Table of contents -->
    {{- partial "toc.html" . -}}
  </div>
</main>
{{ end }}
